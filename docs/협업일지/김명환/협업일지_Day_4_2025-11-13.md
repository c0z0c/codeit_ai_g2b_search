---
layout: default
title: "협업일지 Day 4 (2025-11-13) - 코드잇 AI 4기 3팀 김명환"
description: "협업일지 Day 4 (2025-11-13) - 코드잇 AI 4기 3팀 김명환"
date: 2025-11-13
author: "김명환"
cache-control: no-cache
expires: 0
pragma: no-cache
---

# 일일 협업일지 - Day 4 (2025-11-13)

## [1] 기본 정보
**날짜**: 2025-11-13
**이름**: 김명환
**팀명**: 코드잇 AI 4기 3팀

---

## [2] 오늘 맡은 역할 및 구체적인 작업 내용
**답변**:
```
1. 벡터 저장소 및 검색 시스템 아키텍처 설계 및 구현
2. VectorStoreManager 클래스 설계 및 개발
   - FAISS 기반 벡터 검색 시스템 구현
   - 문서 추가/삭제/검색 기능 구현
3. 임베딩 DB 설계 변경
   - 파일별 임베딩 메타정보 관리로 역할 축소
   - 벡터 데이터는 FAISS로 통합 관리


업데이트 요약
실제 소스 코드의 변경 사항을 반영하여 시스템_아키텍처_설계서.md를 v3.0으로 업데이트했습니다.
주요 변경 내용
아키텍처 다이어그램 업데이트 (라인 67-91)
EmbeddingsDB 제거
VectorStoreManager 추가
데이터 저장소: 3개 DB → 2개 DB로 단순화
데이터 접근 계층 설명 변경 (라인 118-129)
VectorStoreManager의 역할 명시
SQLite 데이터베이스 개수 수정 (2개)
임베딩 처리 모듈 업데이트 (라인 187-244)
EmbeddingProcessor 메서드 간소화
VectorStoreManager 통합 설명 추가
처리 흐름 다이어그램 개선
데이터베이스 모듈 재구성 (라인 406-479)
DocumentsDB: TB_DOCUMENTS 단일 테이블 구조 반영
EmbeddingsDB → VectorStoreManager로 교체
Document.metadata 구조 명시
데이터 흐름 다이어그램 업데이트 (라인 563-636)
문서 업로드 흐름: VectorStoreManager 사용
질의 응답 흐름: Document.metadata 활용
ER 다이어그램 개선 (라인 937-984)
FAISS_INDEX 및 FAISS_METADATA 추가
TB_DOCUMENTS 구조 반영
관계 명확화
디렉토리 구조 업데이트 (라인 875-909)
embeddings_db.py 제거
vectorstore 디렉토리 설명 개선
문서 버전 정보 (라인 1216-1226)
버전: 2.0 → 3.0
날짜: 2025-11-13
주요 변경사항 상세 기록
핵심 개선 사항
✅ EmbeddingsDB 완전 제거: 별도 DB 없이 FAISS 내부 메타데이터만 사용
✅ VectorStoreManager 도입: FAISS 인덱스 및 메타데이터 통합 관리
✅ 아키텍처 단순화: 3개 DB → 2개 DB (documents.db, chat_history.db)
✅ 메타데이터 통합: Document.metadata에 파일명, 페이지 번호, 청크 정보 저장
✅ 관리 효율성: 단일 인터페이스로 모든 벡터 작업 처리 모든 다이어그램과 설명이 실제 구현된 소스 코드와 일치하도록 업데이트되었습니다.


VectorStoreManager 처크에 대하여 hash관리하여 faiss 가 중복해서 추가 되지 않도록 하였다.

거리가 작을수록 유사도 높음 (0 = 완전 일치)
정규화 없이 원본 메트릭 보존
벡터 공간에서의 실제 거리 반영

마크다운 마드실 때
config.py 참고 하시고 아래 내용 필수

    # ==================== 문서 처리 설정 ====================
    EMPTY_PAGE_THRESHOLD: int = 10  # 빈 페이지 판별 기준 (10자 이하)
    ERROR_PAGE_MARKER: str = "--- [오류페이지] ---"  # 오류 페이지 마커 문자열 (변환실패)
    EMPTY_PAGE_MARKER: str = "--- [빈페이지] ---"  # 빈 페이지 마커 문자열
    PAGE_MARKER_FORMAT: str = "--- 페이지 {page_num} ---"  # 페이지 구분자 포맷
    TOKEN_ESTIMATION_DIVISOR: int = 4  # 토큰 수 추정용 나눗수 (문자수/4 ≈ 토큰수)


```

---

## [3] 오늘 작업 완료도 체크 (하나만 체크)
- [ ] 0% (시작 못함)
- [ ] 25% (시작은 했지만 진척 없음)
- [x] 50% (진행 중, 절반 이하)
- [ ] 75% (거의 완료됨)
- [ ] 100% (완료 및 점검까지 완료)

**간단한 근거**:
```
VectorStoreManager 기본 구조 설계 완료
FAISS 통합 아키텍처 설계 완료
실제 구현 및 테스트는 진행 중
```

---

## [4] 오늘 협업 중 제안하거나 피드백한 내용이 있다면?
**답변**:
```
아키텍처 설계 변경 제안:
- RAG 데이터용 마크다운 변환 시 토큰 개수 검사 제거 (불필요한 오버헤드)
- 임베딩 과정에서 데이터베이스 직접 저장 방식 변경 (검색 효율성 문제)
- FAISS 기반 중앙 집중식 벡터 관리 아키텍처 제안
```

---

## [5] 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점은?
**답변**:
```
주요 인사이트:
1. 토큰 개수 검사는 임베딩 단계에서 불필요 (전처리 단계에서 이미 처리됨)
2. DB 기반 벡터 검색은 효율성이 떨어짐 (인덱싱 및 유사도 계산 비효율)
3. FAISS의 한계: 삭제 기능 미지원

해결 방안:
- 임베딩 DB는 파일 메타정보만 저장 (임베딩 해시, 생성일시 등)
- 모든 벡터는 FAISS에서 통합 관리
- 문서 삭제 시 FAISS 인덱스 재구축 방식 채택
```

---

## [6] 일정 지연이나 협업 중 어려웠던 점이 있다면?
**답변**:
```
FAISS 삭제 기능 미지원으로 인한 재설계 필요
문서 삭제 시 전체 인덱스 재구축이 필요하여 성능 최적화 고려 사항 발생
```

---

## [7] 오늘 발표 준비나 커뮤니케이션에서 기여한 부분은?
**답변**:
```
내일 파일 변환 담당자와 인터페이스 논의 예정
VectorStoreManager와 문서 처리 파이프라인 간 연동 방안 협의 필요
```

---

## [8] 내일 목표 / 할 일
**답변**:
```
1. 파일 변환 담당자와 인터페이스 논의
   - 문서 처리 파이프라인 연동 방안 협의
   - 입출력 데이터 포맷 정의
2. 테스트용 더미 FAISS 인덱스 생성
3. 검색 기능 구현 및 테스트
   - 유사도 점수 반환
   - 파일명 반환
   - 페이지 번호 반환
4. VectorStoreManager 단위 테스트 작성
```

---

## [9] 추가 기록 (선택사항)

```
담당 모듈: 벡터 저장소 관리 및 검색 시스템

아키텍처 설계 변경 사항:
- 기존: RAG 데이터 변환 시 토큰 검사 → 변경: 토큰 검사 제거
- 기존: 임베딩을 DB에 직접 저장 → 변경: FAISS 중앙 집중 관리
- 기존: 임베딩 DB에 벡터 저장 → 변경: 메타정보만 저장

VectorStoreManager 설계:
- FAISS 기반 벡터 검색 엔진
- 문서 추가/삭제/검색 인터페이스 제공
- 삭제 시 인덱스 재구축 메커니즘
- 검색 결과: (유사도, 파일명, 페이지번호) 반환

기술 스택:
- FAISS: 벡터 인덱싱 및 유사도 검색
- SQLite: 임베딩 메타정보 관리
- LangChain: 문서 처리 파이프라인
```

---

**작성 시간**: 20분